<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Consultive | Working with Rails Nested Forms</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="all,follow">
    <!-- Bootstrap CSS-->
    <link rel="stylesheet" href="/assets/vendor/bootstrap/css/bootstrap.min.css">
    <!-- Google fonts-->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,700&amp;display=swap">
    <!-- Modal Video-->
    <link rel="stylesheet" href="/assets/vendor/modal-video/css/modal-video.min.css">
    <!-- Leaflet-->
    <link rel="stylesheet" href="/assets/vendor/leaflet/leaflet.css">
    <!-- Owl Carousel-->
    <link rel="stylesheet" href="/assets/vendor/owl.carousel2/assets/owl.carousel.min.css">
    <link rel="stylesheet" href="/assets/vendor/owl.carousel2/assets/owl.theme.default.min.css">
    <!-- theme stylesheet-->
    <link rel="stylesheet" href="/assets/css/style.violet.css" id="theme-stylesheet">
    <!-- Custom stylesheet - for your changes-->
    <link rel="stylesheet" href="/assets/css/custom.css">
    <link href="/assets/css/prism.css" rel="stylesheet">
    <!-- Favicon-->
    <link rel="shortcut icon" href="/assets/img/favicon.png">
    <!-- Tweaks for older IEs-->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
</head>

<body>
    <!-- navbar-->
    <header class="header">
        <div class="top-bar bg-dark text-white">
            <div class="container">
                <div class="row">
                    <div class="col-lg-4 bg-primary py-2 text-center text-lg-left">
                        <p class="mb-0 text-small"><i class="fas fa-clock mr-2"></i>Opening hours: Mon - Fri 9:00 a.m. -
                            5:00 p.m.</p>
                    </div>
                    <div class="col-lg-8 text-right py-2 text-center text-lg-right">
                        <ul class="list-inline mb-0">
                            <li class="list-inline-item"><a class="font-weight-normal text-small reset-anchor"
                                    href="tel:(&#057;&#048;&#056;)&#032;&#051;&#055;&#054;&#045;&#054;&#053;&#054;&#054;"><i class="fas fa-mobile mr-2"></i>‪(&#057;&#048;&#056;)&#032;&#051;&#055;&#054;&#045;&#054;&#053;&#054;&#054;</a></li>
                            <li class="list-inline-item">|</li>
                            <li class="list-inline-item"><a class="font-weight-normal text-small reset-anchor"
                                    href="mailto:&#104;&#101;&#051;&#101;&#114;&#115;&#064;&#103;&#109;&#097;&#105;&#108;&#046;&#099;&#111;&#109;"><i class="fas fa-envelope mr-2"></i>&#104;&#101;&#051;&#101;&#114;&#115;&#064;&#103;&#109;&#097;&#105;&#108;&#046;&#099;&#111;&#109;</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <nav class="navbar navbar-expand-lg navbar-light py-3 bg-white shadow-sm">
            <div class="container"><a class="navbar-brand" href="/"><img src="/assets/img/logo.svg" alt="" width="200"></a>
                <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
                    data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                    aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item mx-2 active"><a class="nav-link text-uppercase" href="/">Home </a>
                        </li>
                        <li class="nav-item mx-2"><a class="nav-link text-uppercase" href="/about">About</a></li>
                        <li class="nav-item mx-2"><a class="nav-link text-uppercase" href="/contact">Contact</a></li>
                        <li class="nav-item mx-2"><a class="nav-link text-uppercase" href="/blog">Blog</a>
                        <li class="nav-item ml-lg-3 pl-lg-3"><a class="btn btn-outline-primary btn-sm" href="/contact">Request a quote</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    
<section id="page-title" class="page-title">
    <div class="bg-title">
        <div class="container">
            <div class="title">
                <h1>Single Post</h1>
            </div><!-- End .title -->
            <div class="breadcrumb">
                <ul>
                    <li><a href="/blog">Blog</a></li>
                    <li>Working with Rails Nested Forms</li>
                </ul>
            </div>
        </div> <!-- End .conatainer -->
    </div>
</section>
<!--
=====================
    End Page Title
=====================
-->
<section id="content">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="primary">
                    <div class="blog-post">
                        <div class="thum-item">
                            <img src="/assets/img/blog/kingfisher.jpg" width="750" height="300" alt="Post Thumnail Image">
                        </div> <!-- End .thum-item -->
                        <div class="post">
                            <div class="blog-title">
                                <h2>Working with Rails Nested Forms</h2>
                            </div>
                            <div class="meta">
                                <ul>
                                    <!-- <li class="category"><a href="archive.html">Lifestyle</a></li> -->
                                    <li class="author">By Héber Sandoval</li>
                                    <li class="date">October 19, 2016</li>
                                </ul>
                            </div> <!-- End .meta -->
                            <div class="content">

                                <!-- Excerpt Start -->
<p>Getting nested forms to work correctly. This is what I'll discuss briefly. I'll attempt to nest the <code>Ingredient</code> model under the <code>Recipe</code> model in a form so that a user can input a recipe and its associated ingredients.</p>
<!-- Excerpt End -->
<h2>Working with Rails Nested Forms</h2>
<p>To get all the pieces connected, I needed to associate all the models for this exercise, see my blog on &quot;model associations&quot; (create link). Here is the <code>RecipesController</code>, with a <code>new</code>, <code>create</code> action.</p>
<pre class="language-ruby"><code class="language-ruby"><span class="token keyword">class</span> <span class="token class-name">RecipesController</span> <span class="token operator">&lt;</span> <span class="token constant">ApplicationController</span><br>  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">new</span></span><br>    <span class="token variable">@recipe</span> <span class="token operator">=</span> <span class="token constant">Recipe</span><span class="token punctuation">.</span><span class="token keyword">new</span><br>  <span class="token keyword">end</span><br><br>  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">create</span></span><br>    <span class="token comment"># raise params.inspect</span><br>    <span class="token variable">@recipe</span> <span class="token operator">=</span> <span class="token constant">Recipe</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span>recipe_params<span class="token punctuation">)</span><br>    <span class="token keyword">if</span> <span class="token variable">@recipe</span><span class="token punctuation">.</span>save<br>      redirect_to recipe_path<span class="token punctuation">(</span><span class="token variable">@recipe</span><span class="token punctuation">)</span><br>    <span class="token keyword">else</span><br>      render <span class="token symbol">:new</span><br>    <span class="token keyword">end</span><br>  <span class="token keyword">end</span><br><br>  <span class="token keyword">private</span><br><br>  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">recipe_params</span></span><br>    params<span class="token punctuation">.</span><span class="token keyword">require</span><span class="token punctuation">(</span><span class="token symbol">:recipe</span><span class="token punctuation">)</span><span class="token punctuation">.</span>permit<span class="token punctuation">(</span><span class="token symbol">:name</span><span class="token punctuation">)</span><br>  <span class="token keyword">end</span><br><span class="token keyword">end</span></code></pre>
<p>Below, we have a <code>form_for</code> form builder to create a form for a recipe. The part that we'll be concentrating is how to associate any amount of ingredients to this recipe. For now, this is being hard-coded in html.</p>
<pre class="language-ruby"><code class="language-ruby"><span class="token operator">&lt;</span>h1<span class="token operator">></span><span class="token constant">New</span> <span class="token constant">Recipe</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><br><br><span class="token operator">&lt;</span><span class="token string">%= form_for(@recipe) do |f| %><br>  &lt;%=</span> f<span class="token punctuation">.</span>label <span class="token symbol">:name</span> <span class="token string">%><br>  &lt;%= f.text_field :name %></span><br><br>  <span class="token operator">&lt;</span>p<span class="token operator">></span><span class="token constant">Add</span> <span class="token constant">Ingredients</span><span class="token punctuation">:</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span><br>  <span class="token operator">&lt;</span>ul<span class="token operator">></span><br>    <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> name<span class="token operator">=</span><span class="token string">"ingredients[][name]"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><br>    <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> name<span class="token operator">=</span><span class="token string">"ingredients[][name]"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><br>    <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> name<span class="token operator">=</span><span class="token string">"ingredients[][name]"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><br>  <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span><br><br>  <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">=</span> f<span class="token punctuation">.</span>submit <span class="token string">%><br>&lt;% end %></span></code></pre>
<p>Right now, we can grab the value of <code>params</code> in the form of an array of hashes, which we hard-coded to accept. When the form is submitted, this is what the <code>params</code> looks like.</p>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">{</span><span class="token string">"utf8"</span><span class="token operator">=</span><span class="token operator">></span><span class="token string">"✓"</span>,<br> <span class="token string">"authenticity_token"</span><span class="token operator">=</span><span class="token operator">></span><span class="token string">"vAsZKoce0jNHjOBWxhHX6QcgesAiEmueBDUgmKmK4gU2nPvnQDTTOdt7bd0oDIO8Libc1ax6QQQ83MhQkvxDVw=="</span>,<br> <span class="token string">"recipe"</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token string">"name"</span><span class="token operator">=</span><span class="token operator">></span><span class="token string">"Pizza"</span><span class="token punctuation">}</span>,<br> <span class="token string">"ingredients"</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">"name"</span><span class="token operator">=</span><span class="token operator">></span><span class="token string">"cheese"</span><span class="token punctuation">}</span>,<br> <span class="token punctuation">{</span><span class="token string">"name"</span><span class="token operator">=</span><span class="token operator">></span><span class="token string">"tomatoes"</span><span class="token punctuation">}</span>,<br> <span class="token punctuation">{</span><span class="token string">"name"</span><span class="token operator">=</span><span class="token operator">></span><span class="token string">"lettuce"</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<br> <span class="token string">"commit"</span><span class="token operator">=</span><span class="token operator">></span><span class="token string">"Create Recipe"</span><span class="token punctuation">}</span></code></pre>
<p>So, when the user types &quot;Pizza&quot; in the text field for the recipe's name, it's saved in the <code>params</code> as <code>&quot;recipe&quot;=&gt;{&quot;name&quot;=&gt;&quot;Pizza&quot;}</code>, as shown above. At the same time, when the user enters many values in the text field for the ingredients, it's saved as <code>&quot;ingredients&quot;=&gt;[{&quot;name&quot;=&gt;&quot;cheese&quot;}, {&quot;name&quot;=&gt;&quot;tomatoes&quot;}, {&quot;name&quot;=&gt;&quot;lettuce&quot;}]</code> in the <code>params</code>, which is an array of hashes.</p>
<p>Where do we go from here? We can use the array of hashes that we get back from <code>params</code> and use them to build a recipe with ingredients, thanks to the model association. Since we know what <code>params</code> looks like and we only want the value of the recipe hash we can iterate over this hash.</p>
<pre class="language-ruby"><code class="language-ruby"><span class="token keyword">class</span> <span class="token class-name">RecipesController</span> <span class="token operator">&lt;</span> <span class="token constant">ApplicationController</span><br>  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">create</span></span><br>    <span class="token variable">@recipe</span> <span class="token operator">=</span> <span class="token constant">Recipe</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span>recipe_params<span class="token punctuation">)</span><br>    params<span class="token punctuation">[</span><span class="token symbol">:recipes</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">each</span> <span class="token keyword">do</span> <span class="token operator">|</span>ingredient<span class="token operator">|</span><br>      <span class="token variable">@recipe</span><span class="token punctuation">.</span>ingredients<span class="token punctuation">.</span>build<span class="token punctuation">(</span><span class="token symbol">:name</span> <span class="token operator">=</span><span class="token operator">></span> ingredient<span class="token punctuation">[</span><span class="token symbol">:name</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br>    <span class="token keyword">end</span><br>    <span class="token keyword">if</span> <span class="token variable">@recipe</span><span class="token punctuation">.</span>save<br>      <span class="token comment"># raise params.inspect</span><br>      redirect_to recipe_path<span class="token punctuation">(</span><span class="token variable">@recipe</span><span class="token punctuation">)</span><br>    <span class="token keyword">else</span><br>      render <span class="token symbol">:new</span><br>    <span class="token keyword">end</span><br>  <span class="token keyword">end</span></code></pre>
<p>The <code>@recipe.ingredients.build(:name =&gt; ingredient[:name])</code> is associating each of the ingredients with the corresponding recipe. When the parent object is save the child object is saved automatically too. But we can refactor this a bit more.</p>
<p>Since we are adding an attribute to the ingredient and associating it with a recipe, we can build a custom method in the recipe's model called <code>ingredients_attributes=(ingredients)</code>.</p>
<pre class="language-ruby"><code class="language-ruby"><span class="token keyword">class</span> <span class="token class-name">Recipe</span> <span class="token operator">&lt;</span> <span class="token constant">ActiveRecord</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">Base</span><br>  has_many <span class="token symbol">:pantries</span><br>  has_many <span class="token symbol">:ingredients</span><span class="token punctuation">,</span> through<span class="token punctuation">:</span> <span class="token symbol">:pantries</span><br><br>  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">ingredients_attributes</span></span><span class="token operator">=</span><span class="token punctuation">(</span>ingredients<span class="token punctuation">)</span><br>    ingredients<span class="token punctuation">.</span><span class="token keyword">each</span> <span class="token keyword">do</span> <span class="token operator">|</span>ingredient_hash<span class="token operator">|</span><br>      <span class="token keyword">self</span><span class="token punctuation">.</span>ingredients<span class="token punctuation">.</span>build<span class="token punctuation">(</span><span class="token symbol">:name</span> <span class="token operator">=</span><span class="token operator">></span> ingredient_hash<span class="token punctuation">[</span><span class="token symbol">:name</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br>    <span class="token keyword">end</span><br>  <span class="token keyword">end</span><br><span class="token keyword">end</span></code></pre>
<p>This custom method takes an argument of hash ingredients and iterates over each hash collecting the name attribute for each ingredient and builds a recipe with each ingredient.</p>
<p>This is how the RecipesController looks like now:</p>
<pre class="language-ruby"><code class="language-ruby"><span class="token keyword">class</span> <span class="token class-name">RecipesController</span> <span class="token operator">&lt;</span> <span class="token constant">ApplicationController</span><br><br>  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">create</span></span><br>    <span class="token variable">@recipe</span> <span class="token operator">=</span> <span class="token constant">Recipe</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span>recipe_params<span class="token punctuation">)</span><br>    <span class="token variable">@recipe</span><span class="token punctuation">.</span>ingredients_attributes<span class="token operator">=</span><span class="token punctuation">(</span>params<span class="token punctuation">[</span><span class="token symbol">:ingredients</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br>    <span class="token keyword">if</span> <span class="token variable">@recipe</span><span class="token punctuation">.</span>save<br>      redirect_to recipe_path<span class="token punctuation">(</span><span class="token variable">@recipe</span><span class="token punctuation">)</span><br>    <span class="token keyword">else</span><br>      render <span class="token symbol">:new</span><br>    <span class="token keyword">end</span><br>  <span class="token keyword">end</span><br><span class="token keyword">end</span></code></pre>
<p>Once the submit button is clicked, the rails server output confirms that this action worked.</p>
<pre class="language-bash"><code class="language-bash">Started POST <span class="token string">"/recipes"</span> <span class="token keyword">for</span> ::1 at <span class="token number">2016</span>-10-13 <span class="token number">17</span>:26:16 -0400<br>Processing by RecipesController<span class="token comment">#create as HTML</span><br><br>  Parameters: <span class="token punctuation">{</span><span class="token string">"utf8"</span><span class="token operator">=</span><span class="token operator">></span><span class="token string">"✓"</span>, <span class="token string">"authenticity_token"</span><span class="token operator">=</span><span class="token operator">></span><span class="token string">"vAsZKoce0jNHjOBWxhHX6QcgesAiEmueBDUgmKmK4gU2nPvnQDTTOdt7bd0oDIO8Libc1ax6QQQ83MhQkvxDVw=="</span>, <span class="token string">"recipe"</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token string">"name"</span><span class="token operator">=</span><span class="token operator">></span><span class="token string">"Pizza"</span><span class="token punctuation">}</span>, <span class="token string">"ingredients"</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">"name"</span><span class="token operator">=</span><span class="token operator">></span><span class="token string">"cheese"</span><span class="token punctuation">}</span>, <span class="token punctuation">{</span><span class="token string">"name"</span><span class="token operator">=</span><span class="token operator">></span><span class="token string">"tomatoes"</span><span class="token punctuation">}</span>, <span class="token punctuation">{</span><span class="token string">"name"</span><span class="token operator">=</span><span class="token operator">></span><span class="token string">"lettuce"</span><span class="token punctuation">}</span><span class="token punctuation">]</span>, <span class="token string">"commit"</span><span class="token operator">=</span><span class="token operator">></span><span class="token string">"Create Recipe"</span><span class="token punctuation">}</span><br><br>   <span class="token punctuation">(</span><span class="token number">0</span>.0ms<span class="token punctuation">)</span>  begin transaction<br>  SQL <span class="token punctuation">(</span><span class="token number">4</span>.1ms<span class="token punctuation">)</span>  INSERT INTO <span class="token string">"recipes"</span> <span class="token punctuation">(</span><span class="token string">"name"</span>, <span class="token string">"created_at"</span>, <span class="token string">"updated_at"</span><span class="token punctuation">)</span> VALUES <span class="token punctuation">(</span>?, ?, ?<span class="token punctuation">)</span>  <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">"name"</span>, <span class="token string">"Pizza"</span><span class="token punctuation">]</span>, <span class="token punctuation">[</span><span class="token string">"created_at"</span>, <span class="token string">"2016-10-13 21:26:16.437033"</span><span class="token punctuation">]</span>, <span class="token punctuation">[</span><span class="token string">"updated_at"</span>, <span class="token string">"2016-10-13 21:26:16.437033"</span><span class="token punctuation">]</span><span class="token punctuation">]</span><br><br>  SQL <span class="token punctuation">(</span><span class="token number">0</span>.0ms<span class="token punctuation">)</span>  INSERT INTO <span class="token string">"ingredients"</span> <span class="token punctuation">(</span><span class="token string">"name"</span>, <span class="token string">"created_at"</span>, <span class="token string">"updated_at"</span><span class="token punctuation">)</span> VALUES <span class="token punctuation">(</span>?, ?, ?<span class="token punctuation">)</span>  <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">"name"</span>, <span class="token string">"cheese"</span><span class="token punctuation">]</span>, <span class="token punctuation">[</span><span class="token string">"created_at"</span>, <span class="token string">"2016-10-13 21:26:16.441095"</span><span class="token punctuation">]</span>, <span class="token punctuation">[</span><span class="token string">"updated_at"</span>, <span class="token string">"2016-10-13 21:26:16.441095"</span><span class="token punctuation">]</span><span class="token punctuation">]</span><br><br>  SQL <span class="token punctuation">(</span><span class="token number">0</span>.0ms<span class="token punctuation">)</span>  INSERT INTO <span class="token string">"pantries"</span> <span class="token punctuation">(</span><span class="token string">"recipe_id"</span>, <span class="token string">"ingredient_id"</span>, <span class="token string">"created_at"</span>, <span class="token string">"updated_at"</span><span class="token punctuation">)</span> VALUES <span class="token punctuation">(</span>?, ?, ?, ?<span class="token punctuation">)</span>  <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">"recipe_id"</span>, <span class="token number">7</span><span class="token punctuation">]</span>, <span class="token punctuation">[</span><span class="token string">"ingredient_id"</span>, <span class="token number">7</span><span class="token punctuation">]</span>, <span class="token punctuation">[</span><span class="token string">"created_at"</span>, <span class="token string">"2016-10-13 21:26:16.449028"</span><span class="token punctuation">]</span>, <span class="token punctuation">[</span><span class="token string">"updated_at"</span>, <span class="token string">"2016-10-13 21:26:16.449028"</span><span class="token punctuation">]</span><span class="token punctuation">]</span><br><br>  SQL <span class="token punctuation">(</span><span class="token number">0</span>.0ms<span class="token punctuation">)</span>  INSERT INTO <span class="token string">"ingredients"</span> <span class="token punctuation">(</span><span class="token string">"name"</span>, <span class="token string">"created_at"</span>, <span class="token string">"updated_at"</span><span class="token punctuation">)</span> VALUES <span class="token punctuation">(</span>?, ?, ?<span class="token punctuation">)</span>  <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">"name"</span>, <span class="token string">"tomatoes"</span><span class="token punctuation">]</span>, <span class="token punctuation">[</span><span class="token string">"created_at"</span>, <span class="token string">"2016-10-13 21:26:16.452992"</span><span class="token punctuation">]</span>, <span class="token punctuation">[</span><span class="token string">"updated_at"</span>, <span class="token string">"2016-10-13 21:26:16.452992"</span><span class="token punctuation">]</span><span class="token punctuation">]</span><br><br>  SQL <span class="token punctuation">(</span><span class="token number">0</span>.0ms<span class="token punctuation">)</span>  INSERT INTO <span class="token string">"pantries"</span> <span class="token punctuation">(</span><span class="token string">"recipe_id"</span>, <span class="token string">"ingredient_id"</span>, <span class="token string">"created_at"</span>, <span class="token string">"updated_at"</span><span class="token punctuation">)</span> VALUES <span class="token punctuation">(</span>?, ?, ?, ?<span class="token punctuation">)</span>  <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">"recipe_id"</span>, <span class="token number">7</span><span class="token punctuation">]</span>, <span class="token punctuation">[</span><span class="token string">"ingredient_id"</span>, <span class="token number">8</span><span class="token punctuation">]</span>, <span class="token punctuation">[</span><span class="token string">"created_at"</span>, <span class="token string">"2016-10-13 21:26:16.456993"</span><span class="token punctuation">]</span>, <span class="token punctuation">[</span><span class="token string">"updated_at"</span>, <span class="token string">"2016-10-13 21:26:16.456993"</span><span class="token punctuation">]</span><span class="token punctuation">]</span><br><br>  SQL <span class="token punctuation">(</span><span class="token number">0</span>.0ms<span class="token punctuation">)</span>  INSERT INTO <span class="token string">"ingredients"</span> <span class="token punctuation">(</span><span class="token string">"name"</span>, <span class="token string">"created_at"</span>, <span class="token string">"updated_at"</span><span class="token punctuation">)</span> VALUES <span class="token punctuation">(</span>?, ?, ?<span class="token punctuation">)</span>  <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">"name"</span>, <span class="token string">"lettuce"</span><span class="token punctuation">]</span>, <span class="token punctuation">[</span><span class="token string">"created_at"</span>, <span class="token string">"2016-10-13 21:26:16.461008"</span><span class="token punctuation">]</span>, <span class="token punctuation">[</span><span class="token string">"updated_at"</span>, <span class="token string">"2016-10-13 21:26:16.461008"</span><span class="token punctuation">]</span><span class="token punctuation">]</span><br><br>  SQL <span class="token punctuation">(</span><span class="token number">0</span>.0ms<span class="token punctuation">)</span>  INSERT INTO <span class="token string">"pantries"</span> <span class="token punctuation">(</span><span class="token string">"recipe_id"</span>, <span class="token string">"ingredient_id"</span>, <span class="token string">"created_at"</span>, <span class="token string">"updated_at"</span><span class="token punctuation">)</span> VALUES <span class="token punctuation">(</span>?, ?, ?, ?<span class="token punctuation">)</span>  <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">"recipe_id"</span>, <span class="token number">7</span><span class="token punctuation">]</span>, <span class="token punctuation">[</span><span class="token string">"ingredient_id"</span>, <span class="token number">9</span><span class="token punctuation">]</span>, <span class="token punctuation">[</span><span class="token string">"created_at"</span>, <span class="token string">"2016-10-13 21:26:16.465004"</span><span class="token punctuation">]</span>, <span class="token punctuation">[</span><span class="token string">"updated_at"</span>, <span class="token string">"2016-10-13 21:26:16.465004"</span><span class="token punctuation">]</span><span class="token punctuation">]</span><br>   <span class="token punctuation">(</span><span class="token number">28</span>.7ms<span class="token punctuation">)</span>  commit transaction<br>Redirected to http://localhost:3000/recipes/7<br>Completed <span class="token number">302</span> Found <span class="token keyword">in</span> 89ms <span class="token punctuation">(</span>ActiveRecord: <span class="token number">32</span>.8ms<span class="token punctuation">)</span></code></pre>
<p>We can test this in the rails console to double check.</p>
<pre class="language-bash"><code class="language-bash"><span class="token operator">></span> <span class="token assign-left variable">recipe</span><span class="token operator">=</span>Recipe.find<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><br>  Recipe Load <span class="token punctuation">(</span><span class="token number">0</span>.0ms<span class="token punctuation">)</span>  SELECT  <span class="token string">"recipes"</span>.* FROM <span class="token string">"recipes"</span> WHERE <span class="token string">"recipes"</span><span class="token builtin class-name">.</span><span class="token string">"id"</span> <span class="token operator">=</span> ? LIMIT <span class="token number">1</span>  <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">"id"</span>, <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span><br><span class="token operator">=</span><span class="token operator">></span> <span class="token comment">#&lt;Recipe id: 5, name: "Pizza", created_at: "2016-10-13 21:22:57", updated_at: "2016-10-13 21:22:57"></span><br><br><span class="token operator">></span> recipe.ingredients<br>  Ingredient Load <span class="token punctuation">(</span><span class="token number">0</span>.0ms<span class="token punctuation">)</span>  SELECT <span class="token string">"ingredients"</span>.* FROM <span class="token string">"ingredients"</span> INNER JOIN <span class="token string">"pantries"</span> ON <span class="token string">"ingredients"</span><span class="token builtin class-name">.</span><span class="token string">"id"</span> <span class="token operator">=</span> <span class="token string">"pantries"</span><span class="token builtin class-name">.</span><span class="token string">"ingredient_id"</span> WHERE <span class="token string">"pantries"</span><span class="token builtin class-name">.</span><span class="token string">"recipe_id"</span> <span class="token operator">=</span> ?  <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">"recipe_id"</span>, <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span><br><span class="token operator">=</span><span class="token operator">></span> <span class="token comment">#&lt;ActiveRecord::Associations::CollectionProxy [#&lt;Ingredient id: 1, name: "cheese", created_at: "2016-10-13 21:22:57", updated_at: "2016-10-13 21:22:57">, #&lt;Ingredient id: 2, name: "tomatoes", created_at: "2016-10-13 21:22:57", updated_at: "2016-10-13 21:22:57">, #&lt;Ingredient id: 3, name: "lettuce", created_at: "2016-10-13 21:22:57", updated_at: "2016-10-13 21:22:57">]></span></code></pre>
<p>Great!</p>
<p>To prevent from saving empty text fields, we can add an <code>if</code> statement to the recipe's model <code>ingredients_attributes=</code> method:</p>
<pre class="language-ruby"><code class="language-ruby"><span class="token keyword">self</span><span class="token punctuation">.</span>ingredients<span class="token punctuation">.</span>build<span class="token punctuation">(</span><span class="token symbol">:name</span> <span class="token operator">=</span><span class="token operator">></span> ingredient_hash<span class="token punctuation">[</span><span class="token symbol">:name</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">if</span> ingredient_hash<span class="token punctuation">[</span><span class="token symbol">:name</span><span class="token punctuation">]</span><span class="token punctuation">.</span>present<span class="token operator">?</span></code></pre>
<p>Now lets focus on generating the form using rails for the ingredients. So far, this is what we have:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Add Ingredients:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ingredients[][name]<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ingredients[][name]<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ingredients[][name]<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span></code></pre>
<p>To go one level up of abstraction, we can use a <code>text_field_tag</code>.</p>
<pre class="language-ruby"><code class="language-ruby"><span class="token operator">&lt;</span>p<span class="token operator">></span><span class="token constant">Add</span> <span class="token constant">Ingredients</span><span class="token punctuation">:</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span><br><span class="token operator">&lt;</span>ul<span class="token operator">></span><br>  <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token operator">&lt;</span><span class="token string">%= text_field_tag 'ingredients[][name]' %>&lt;/li><br>  &lt;li>&lt;%=</span> text_field_tag <span class="token string">'ingredients[][name]'</span> <span class="token string">%>&lt;/li></span><br>  <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">=</span> text_field_tag <span class="token string">'ingredients[][name]'</span> <span class="token string">%>&lt;/li></span><br><span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span></code></pre>
<p>This will work just the same as the good old html code. But since we're using <code>ingredients_attributes</code> in our controller, we can use it to build a form. In this case, a recipe has a hash of ingredients which has an attribute of name and the following will work.</p>
<pre class="language-ruby"><code class="language-ruby"><span class="token operator">&lt;</span>p<span class="token operator">></span><span class="token constant">Add</span> <span class="token constant">Ingredients</span><span class="token punctuation">:</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span><br><span class="token operator">&lt;</span>ul<span class="token operator">></span><br>  <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token operator">&lt;</span><span class="token string">%= text_field_tag 'recipe[ingredients_attributes][][name]' %>&lt;/li><br>  &lt;li>&lt;%=</span> text_field_tag <span class="token string">'recipe[ingredients_attributes][][name]'</span> <span class="token string">%>&lt;/li></span><br>  <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">=</span> text_field_tag <span class="token string">'recipe[ingredients_attributes][][name]'</span> <span class="token string">%>&lt;/li></span><br><span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span></code></pre>
<p>We can mass assign our nested attributes in the controller like this and sanitize these attributes with strong params.</p>
<pre class="language-ruby"><code class="language-ruby"><span class="token keyword">class</span> <span class="token class-name">RecipesController</span> <span class="token operator">&lt;</span> <span class="token constant">ApplicationController</span><br>  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">create</span></span><br>    <span class="token variable">@recipe</span> <span class="token operator">=</span> <span class="token constant">Recipe</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span>recipe_params<span class="token punctuation">)</span><br>    <span class="token variable">@recipe</span><span class="token punctuation">.</span>ingredients_attributes<span class="token operator">=</span><span class="token punctuation">(</span>params<span class="token punctuation">[</span><span class="token symbol">:recipe</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token symbol">:ingredients_attributes</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br>    <span class="token keyword">if</span> <span class="token variable">@recipe</span><span class="token punctuation">.</span>save<br>      redirect_to recipe_path<span class="token punctuation">(</span><span class="token variable">@recipe</span><span class="token punctuation">)</span><br>    <span class="token keyword">else</span><br>      render <span class="token symbol">:new</span><br>    <span class="token keyword">end</span><br>  <span class="token keyword">end</span><br><br>  <span class="token keyword">private</span><br><br>  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">recipe_params</span></span><br>    params<span class="token punctuation">.</span><span class="token keyword">require</span><span class="token punctuation">(</span><span class="token symbol">:recipe</span><span class="token punctuation">)</span><span class="token punctuation">.</span>permit<span class="token punctuation">(</span><span class="token symbol">:name</span><span class="token punctuation">,</span> <span class="token symbol">:ingredients_attributes</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token symbol">:name</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br>  <span class="token keyword">end</span><br><span class="token keyword">end</span></code></pre>
<p>Moving one level of abstraction, we can use the <code>form_for</code> build to help us create what we're essentially doing, looping through each ingredient in the each text field.</p>
<pre class="language-ruby"><code class="language-ruby"><span class="token operator">&lt;</span>p<span class="token operator">></span><span class="token constant">Add</span> <span class="token constant">Ingredients</span><span class="token punctuation">:</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span><br><span class="token operator">&lt;</span>ul<span class="token operator">></span><br>  <span class="token operator">&lt;</span><span class="token string">%= f.fields_for :ingredients do |ingredient_field| %><br>    &lt;li>&lt;%=</span> ingredient_field<span class="token punctuation">.</span>text_field <span class="token symbol">:name</span> <span class="token string">%>&lt;/li></span><br>  <span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token keyword">end</span> <span class="token string">%><br>&lt;/ul></span></code></pre>
<p>Now we have a new form builder that can build a text field for each ingredient to the recipe. The associated model must respond to a writer method, which we created. If we navigate to the form, it will work but the forms to input the ingredients are missing. To add them, we need to add some code in the RecipesController new action.</p>
<pre class="language-ruby"><code class="language-ruby"><span class="token keyword">class</span> <span class="token class-name">RecipesController</span> <span class="token operator">&lt;</span> <span class="token constant">ApplicationController</span><br>  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">new</span></span><br>    <span class="token variable">@recipe</span> <span class="token operator">=</span> <span class="token constant">Recipe</span><span class="token punctuation">.</span><span class="token keyword">new</span><br>    <span class="token number">3.</span>times <span class="token keyword">do</span><br>      <span class="token variable">@recipe</span><span class="token punctuation">.</span>ingredients<span class="token punctuation">.</span>build<br>    <span class="token keyword">end</span><br>  <span class="token keyword">end</span><br><span class="token keyword">end</span></code></pre>
<p>This is how the html looks like.</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>recipe[ingredients_attributes][0][name]<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>recipe_ingredients_attributes_0_name<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>recipe[ingredients_attributes][1][name]<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>recipe_ingredients_attributes_1_name<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>recipe[ingredients_attributes][2][name]<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>recipe_ingredients_attributes_2_name<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span></code></pre>
<p>If you submit the form, you will see this:</p>
<pre class="language-bash"><code class="language-bash">TypeError <span class="token keyword">in</span> RecipesController<span class="token comment">#create</span><br>no implicit conversion of Symbol into Integer<br>Rails.root: C:/Users/hmisa/Documents/proj/ror/test/test_nested_attributes</code></pre>
<p>This means that we need to allow the index of each ingredients as shown above.</p>
<pre class="language-ruby"><code class="language-ruby"><span class="token keyword">def</span> <span class="token method-definition"><span class="token function">ingredients_attributes</span></span><span class="token operator">=</span><span class="token punctuation">(</span>ingredients<span class="token punctuation">)</span><br>  ingredients<span class="token punctuation">.</span><span class="token keyword">each</span> <span class="token keyword">do</span> <span class="token operator">|</span>i<span class="token punctuation">,</span> ingredient_hash<span class="token operator">|</span><br>    <span class="token keyword">self</span><span class="token punctuation">.</span>ingredients<span class="token punctuation">.</span>build<span class="token punctuation">(</span><span class="token symbol">:name</span> <span class="token operator">=</span><span class="token operator">></span> ingredient_hash<span class="token punctuation">[</span><span class="token symbol">:name</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br>  <span class="token keyword">end</span><br><span class="token keyword">end</span></code></pre>
<p>And there is our input forms. Now params looks like this.</p>
<pre class="language-bash"><code class="language-bash"><span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span><span class="token string">"utf8"</span><span class="token operator">=</span><span class="token operator">></span><span class="token string">"✓"</span>, <span class="token string">"authenticity_token"</span><span class="token operator">=</span><span class="token operator">></span><span class="token string">"/wnR..."</span>, <span class="token string">"recipe"</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token string">"name"</span><span class="token operator">=</span><span class="token operator">></span><span class="token string">""</span>, <span class="token string">"ingredients_attributes"</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token string">"0"</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token string">"name"</span><span class="token operator">=</span><span class="token operator">></span><span class="token string">"cheese"</span><span class="token punctuation">}</span>, <span class="token string">"1"</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token string">"name"</span><span class="token operator">=</span><span class="token operator">></span><span class="token string">"tomatoes"</span><span class="token punctuation">}</span>, <span class="token string">"2"</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token string">"name"</span><span class="token operator">=</span><span class="token operator">></span><span class="token string">"lettuce"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>, <span class="token string">"commit"</span><span class="token operator">=</span><span class="token operator">></span><span class="token string">"Create Recipe"</span>, <span class="token string">"controller"</span><span class="token operator">=</span><span class="token operator">></span><span class="token string">"recipes"</span>, <span class="token string">"action"</span><span class="token operator">=</span><span class="token operator">></span><span class="token string">"create"</span><span class="token punctuation">}</span></code></pre>

                                    
                            </div> <!-- End .content -->
                            <div class="line"></div>
                            <div class="share">
                                <div class="post-bottom">
                                    <div class="tag">
                                        <span>Tag:</span>
                                        <a href="#">lifestyle</a>
                                        <a href="#">music</a>
                                        <a href="#">rock</a>
                                    </div> <!-- End .continue -->
                                </div> <!-- End .post-bottom -->
                            </div> <!-- End .share -->
                        </div> <!--  End .post -->
                    </div> <!-- End .blog-post -->
                    
                    <div class="author-box">
                        <div class="photo">
                            <a href="#"><img src="/assets/img/blo/heber-sandoval.jpg" alt="Héber Sandoval"></a>
                        </div> <!-- End .photo -->
                        <div class="bio">
                            <h5><a href="">Héber Sandoval</a></h5>
                            <h6>Web developer</h6>
                            <p>As a Web Developer, I have the opportunity to contribute to innovations and break-through that can benefit the end user using vaires technologies.</p>
                            <div class="share-iocn">
                                <span class="social"><a href="https://github.com/hebersandoval"><i class="fa fa-github" target="_blank"></i></a></span>
                                <span class="social"><a href="mailto:&#104;&#101;&#051;&#101;&#114;&#115;&#064;&#103;&#109;&#097;&#105;&#108;&#046;&#099;&#111;&#109;"><i class="fa fa-envelope"></i></a></span>
                                <span class="social"><a href="https://www.linkedin.com/in/hebersandoval/" target="_blank"><i class="fa fa-linkedin"></i></a></span>
                            </div> <!-- End .share-iocn -->
                        </div> <!-- End .bio -->
                    </div> <!-- End .author-box -->

                    <!-- Related post section --->
                    
                    <!-- Blog comment section -->

                    <!-- Reply comment section -->
                    <br><br><br><br>

                </div>
                <!--
                ===============
                End .primary 
                ===============
                -->
            </div> <!-- End .col-md-12 -->
        </div> <!-- End .row -->
    </div> <!-- End .container -->
</section>
<!--
=======================
    End Section Content
=======================
-->

    <footer class="bg-dark">
        <!-- <div class="bg-primary py-5 text-white">
            <div class="container">
                <div class="row">
                    <div class="col-lg-3 col-md-6 mb-4 mb-lg-0">
                        <div class="d-flex align-items-center">
                            <h6 class="h1 mb-0">705</h6>
                            <p class="ml-3 flex-grow-1 text-uppercase mb-0">Projects completed</p>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6 mb-4 mb-lg-0">
                        <div class="d-flex align-items-center">
                            <h6 class="h1 mb-0">809</h6>
                            <p class="ml-3 flex-grow-1 text-uppercase mb-0">Satisfied customers</p>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6 mb-4 mb-lg-0">
                        <div class="d-flex align-items-center">
                            <h6 class="h1 mb-0">354</h6>
                            <p class="ml-3 flex-grow-1 text-uppercase mb-0">Awards recieved</p>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6 mb-4 mb-lg-0">
                        <div class="d-flex align-items-center">
                            <h6 class="h1 mb-0">35</h6>
                            <p class="ml-3 flex-grow-1 text-uppercase mb-0">Years of experience</p>
                        </div>
                    </div>
                </div>
            </div>
        </div> -->
        <div class="bg-dark py-5 text-white">
            <div class="container">
                <div class="row py-5">
                    <div class="col-lg-4 col-md-6"><img class="mb-4" src="/assets/img/logo-white.svg" alt="" width="200">
                        <p class="text-muted text-small mb-4">Building software solutions that deliver personalized user experiences.</p>
                        <p class="mb-1"><i class="fas fa-envelope mr-3 text-primary fa-fw"></i><span
                                class="text-small text-muted">&#104;&#101;&#051;&#101;&#114;&#115;&#064;&#103;&#109;&#097;&#105;&#108;&#046;&#099;&#111;&#109;</span></p>
                        <p class="mb-1"><i class="fas fa-mobile mr-3 text-primary fa-fw"></i><span
                                class="text-small text-muted">‪(&#057;&#048;&#056;)&#032;&#051;&#055;&#054;&#045;&#054;&#053;&#054;&#054;</span></p>
                        <p class="mb-1"><i class="fas fa-map-marker-alt mr-3 text-primary fa-fw"></i><span
                                class="text-small text-muted">Union, New Jersey</span></p>
                    </div>
                    <div class="col-lg-2 col-md-6">
                        <h5 class="mt-3 mb-4 font-weight-normal">Quick links</h5>
                        <ul class="list-unstyled">
                            <li class="mb-2"><a class="footer-link" href="/">Home</a></li>
                            <li class="mb-2"><a class="footer-link" href="/about">About</a></li>
                            <li class="mb-2"><a class="footer-link" href="/contact">Contact</a></li>
                            <li class="mb-2"><a class="footer-link" href="/blog">Blog</a></li>
                        </ul>
                    </div>
                    <div class="col-lg-2 col-md-6">
                        <h5 class="mt-3 mb-4 font-weight-normal">Our services</h5>
                        <ul class="list-unstyled">
                            <li class="mb-2"><a class="footer-link" href="/contact">Make Appointment</a></li>
                            <li class="mb-2"><a class="footer-link" href="/about">Our Services</a></li>
                            <!-- <li class="mb-2"><a class="footer-link" href="#">Department Service</a></li> -->
                            <!-- <li class="mb-2"><a class="footer-link" href="#">Our Case Studies</a></li> -->
                            <li class="mb-2"><a class="footer-link" href="/contact">Free Consultation</a></li>
                            <!-- <li class="mb-2"><a class="footer-link" href="#">Meet Our Experts</a></li> -->
                        </ul>
                    </div>
                    <div class="col-lg-4 col-md-6">
                        <h5 class="mt-3 mb-4 font-weight-normal">Latest news</h5>
                        <ul class="list-unstyled mb-0">
                            <li class="d-flex mb-4">
                                <div class="pr-2"><img src="/assets/img/blog-thumb-1.jpg" alt="" width="60"></div>
                                <div class="ml-3">
                                    <p class="small text-muted mb-0">May 01, 2019 </p>
                                    <h6 class="text-light font-weight-normal mb-0">Successful Growth In Business 2018
                                    </h6><a class="reset-anchor text-primary text-small" href="#">Read more<i
                                            class="fas fa-angle-right ml-2"></i></a>
                                </div>
                            </li>
                            <li class="d-flex">
                                <div class="pr-2"><img src="/assets/img/blog-thumb-2.jpg" alt="" width="60"></div>
                                <div class="ml-3">
                                    <p class="small text-muted mb-0">May 01, 2019 </p>
                                    <h6 class="text-light font-weight-normal mb-0">Successful Growth In Business 2018
                                    </h6><a class="reset-anchor text-primary text-small" href="#">Read more<i
                                            class="fas fa-angle-right ml-2"></i></a>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="bg-darker py-4">
            <div class="container text-center">
                <!-- You are completely free to use this template for your personal use or as a work for your client as long as you keep the link at the template footer pointing to our partner and us.-->
                <!-- If you would prefer removing the backlink from the theme footer, please purchase the attribution-free license at the theme page at https://bootstraptemple.com.-->
                <p class="mb-0 text-muted text-small">&copy; All rights reserved. Template designed by <a
                        href="https://bootstraptemple.com/p/consulting-bootstrap-template">Bootstrap Temple</a>. </p>
            </div>
        </div>
    </footer>
    <!-- JavaScript files-->
    <script src="/assets/vendor/jquery/jquery.min.js"></script>
    <script src="/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="/assets/vendor/owl.carousel2/owl.carousel.min.js"></script>
    <script src="/assets/vendor/modal-video/js/modal-video.js"></script>
    <script src="/assets/vendor/leaflet/leaflet.js"></script>
    <!-- <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBu5nZKbeK-WHQ70oqOWo-_4VmwOwKP9YQ"></script> -->
    <script src="/assets/js/leaflet.js"></script>
    <script src="/assets/js/front.js"></script>
    <script>
        // ------------------------------------------------------- //
        //   Inject SVG Sprite - 
        //   see more here 
        //   https://css-tricks.com/ajaxing-svg-sprite/
        // ------------------------------------------------------ //
        function injectSvgSprite(path) {

            var ajax = new XMLHttpRequest();
            ajax.open("GET", path, true);
            ajax.send();
            ajax.onload = function (e) {
                var div = document.createElement("div");
                div.className = 'd-none';
                div.innerHTML = ajax.responseText;
                document.body.insertBefore(div, document.body.childNodes[0]);
            }
        }
        // this is set to BootstrapTemple website as you cannot 
        // inject local SVG sprite (using only 'icons/orion-svg-sprite.svg' path)
        // while using file:// protocol
        // pls don't forget to change to your domain :)
        injectSvgSprite('https://bootstraptemple.com/files/icons/orion-svg-sprite.svg');

    </script>
    <!-- FontAwesome CSS - loading as last, so it doesn't block rendering-->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css"
        integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
</body>

</html>